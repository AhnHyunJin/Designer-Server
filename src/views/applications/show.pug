extends ../layout

block content
  ol.breadcrumb
    li.breadcrumb-item.active 
        a(href="/applications") Application 관리
        | /Application 상세보기
        
  .card.mb-3
    .card-header
      i.fas.fa-table
        span.ml-3 API 상세보기

    .card-body
      .table-responsive
        table.table.table-bordered(width='100%' cellspacing='0')
          thead
            tr.text-center
              th(colspan="4") Application 정보
            tr
              th BaseUrl
              td(colspan="3") /#{application.nameSpace}
          tbody
            tr
              th id
              td #{application.id}
              th title
              td #{application.title}
            tr
              th description
              td(colspan="3") #{application.description}
            tr
              th swagger
              td(colspan="3")
                a(href=`/applications/${application.id}/api-docs`) #{`/applications/${application.id}/api-docs`}

      .text-right.mb-3
        a.ml-1.btn.btn-outline-primary(href=`/applications/${application.id}/apis/new`) Api 추가
        button.ml-1.btn.btn-outline-danger(type="button", data-Toggle="modal", data-target="#deleteModal") Application 삭제

      .table-responsive
        table.table.table-bordered(width='100%' cellspacing='0')
          thead
            tr.text-center
              th(colspan="6") Api 정보
            tr.text-center
              th id
              th method
              th endpoint
              th description
              th status
              th

          tbody
            each api in application.apis
              tr.text-center
                td #{api.id}
                td #{api.method}
                td #{api.endpoint}
                td #{api.description}
                td -
                td.text-left
                  a.btn.btn-sm.btn-outline-info(href=`/applications/${application.id}/apis/${api.id}`) api 설정
                  button.ml-3.btn.btn-sm.btn-outline-danger api 삭제

  .modal.fade(id="deleteModal" tabindex='-1' role='dialog' aria-labelledby='deleteModal' aria-hidden='true')
    .modal-dialog(role='document')
      .modal-content
        .modal-header
          h5#exampleModalLabel.modal-title 삭제하기
          button.close(type='button' data-dismiss='modal' aria-label='Close')
            span(aria-hidden='true') &times;
        form(action=`/applications/${application.id}?_method=DELETE`, method="post")
          .modal-body
            | 배포된 API 정보와 Data도 함께 삭제됩니다. <br>
            | 정말 삭제하시겠습니까?
          .modal-footer
            button.btn.btn-secondary(type='button' data-dismiss='modal') 닫기
            input.btn.btn-danger(type="submit", value="삭제")